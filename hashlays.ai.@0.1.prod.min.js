class HaslaysAIProduct{constructor(t,e,n,o,a,i,r,s){this.appId=t,this.appKey=e,this.TypeID=n,this.ProductID=o,this.Logos=s,this.lat=a,this.lang=i,this.launchurl="",this.iframe=null,this.url="https://product.hashlays.com/",this.customerDetails=r,this.component=this.getComponentType(n)}getComponentType(t){return t==="1"?"jwellery":t==="2"?"cosmatics":t==="3"?"hands":t==="4"?"faceais":""}receiveData(t=null){this.showLoadingIndicator(),this.iframe=document.createElement("iframe"),this.iframe.style.position="fixed",this.iframe.style.inset=0,this.iframe.width="100%",this.iframe.height="100%",this.iframe.style.border="none",this.iframe.setAttribute("allow","microphone; camera"),document.body.appendChild(this.iframe),this.launchurl=`${this.url}/product/${this.component}?TypeId=${this.TypeID}&ProductId=${this.ProductID}&AppKey=${this.appKey}&AppId=${this.appId}&lat=${this.lat}&lang=${this.lang}&name=${this.customerDetails.name}&customerId=${this.customerDetails.customerId}&email=${this.customerDetails.email}&firstName=${this.customerDetails.firstName}&lastName=${this.customerDetails.lastName}&city=${this.customerDetails.city}&state=${this.customerDetails.state}&postalCode=${this.customerDetails.postalCode}&phoneNumber=${this.customerDetails.phonenumber}&country=${this.customerDetails.country}&AppLogo=${this.Logos.AppLogo}`,this.iframe.src=this.launchurl,this.iframe.onload=()=>{this.hideLoadingIndicator()},window.addEventListener("message",this.handleMessage.bind(this)),this.sendMessageToIframe()}handleMessage(t){if(t.origin!==this.url)return;const e=t.data;console.log("Data received from iframe:",e)}sendMessageToIframe(){if(!this.iframe||!this.iframe.contentWindow)return void console.error("Iframe is not ready");const t={appId:this.appId,appKey:this.appKey,customerDetails:this.customerDetails};this.iframe.contentWindow.postMessage(t,this.url)}showLoadingIndicator(){const t=document.createElement("div");t.id="loadingIndicator",t.style.position="absolute",t.style.bottom=0,t.style.right=0,t.style.width="100%",t.style.height="100%",t.style.display="flex",t.style.flexDirection="column",t.style.alignItems="center",t.style.justifyContent="center",t.style.backgroundColor="rgba(0, 0, 0, 0.15)",t.style.backdropFilter="blur(5px)",t.style.zIndex="1000";const e=document.createElement("img");e.src=this.Logos.PreloadLogo,e.alt="Logo",e.style.marginTop="5px",e.style.width="250px",e.style.height="auto",e.style.animation="fadeInOut 1.2s ease-in-out infinite",t.appendChild(e),document.body.appendChild(t)}hideLoadingIndicator(){const t=document.getElementById("loadingIndicator");t&&document.body.removeChild(t)}}const style=document.createElement("style");style.textContent=`@keyframes fadeInOut{0%{opacity:0}50%{opacity:1}100%{opacity:0}}`,document.head.appendChild(style);function sendDataToHaslaysAIProduct(t,e,n,o,a,i,r,s,c){const l=new HaslaysAIProduct(t,e,n,o,a,i,r,s);l.receiveData(c)}
